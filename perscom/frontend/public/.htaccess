Options -MultiViews
RewriteEngine On
RewriteBase /perscom/

# ── Proxy /api/* and /uploads/* to the Railway backend ───────────────────────
# This makes all API requests same-origin (26thmeu.org) so cookies work in
# Firefox and Brave (which block cross-domain cookies). Requires mod_proxy.
# Replace YOUR-RAILWAY-APP with your actual Railway app URL.
RewriteRule ^api/(.*)$     https://26th-meu-perscom-production.up.railway.app/api/$1     [P,L]
RewriteRule ^uploads/(.*)$ https://26th-meu-perscom-production.up.railway.app/uploads/$1 [P,L]

# ── React Router client-side routing ─────────────────────────────────────────
# Serve existing files and directories directly; everything else → index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [L]
